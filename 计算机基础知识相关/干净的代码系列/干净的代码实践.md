本文档用于记录编写干净的代码的实例

# 1.图标系统的重建
指导原则：SRP（单一权责原则）
> 当前状态：已经通过冗余数据，与创建修改API的方式，调整相关代码格式，使用统一API解决问题。  
**一些问题如下**
- 1.采用了冗余数据。
  - 需要保持同步，经过反复调试才最终能够保持同步。
- 2.存在两份数据的查看方式。
  - 有A和B两份数据，B为A的图标冗余数据。
  - A可以被修改，而B只提供查看、查询功能。
- 3.图标使用的范围庞大，细细修改。
  - 在较大的API范围内做数据填充。
- 4.可能的残留问题：A存在两种不同类型的数据，分为高低模，但是在过程中高模展示并存储图标数据。
  > 由于SVN，大家在同一个分支开发，所以为了不影响他人，采取了以下策略。
  - 办法1：在DEBUG状态下（开发分支），为减少中间状态，冗余A和B获取图标。
  - 办法2：写工具，将已有的存在的问题，数据由低模迁移到高模上，避免旧的错误。


# 2.配饰管理器的功能子集拆分
指导原则：《重构》——3.20，过大的类。
> 观察一个大类的使用者，经常能够找到如何拆分类的线索。看看使用者是否只用到了这个类所有功能的一个子集，每个这样的子集都可能拆分成一个独立的类。一旦识别处了一个合适的功能子集，就试用“提炼类”、“提炼超类”、或者“以子类取代类型码”对其拆分。  
**当前问题如下**
- 1.在非战斗内，无需使用配饰的特效相关功能。
- 2.部分地方，对配饰管理器删除配饰有依赖。

**处理方式**
- 1.仅对2做检查，保证配饰管理器作为返回值传递出去后，不再做特殊表现，仅做销毁。

# 3.委托UI行为
指导原则：《重构》——12.11，以委托取代超类
> 如果超类的一些函数队子类并不适用，则说明不应该通过继承来获得超类的功能。
**当前问题如下**
- 1.保留DongDong羊（继承了兔子类），但是需要添加长草颜团子，基类是兔子类。
- 2.需要添加一个功能。
- 3.类已经足够复杂。

**处理方式**
> 可以不使用委托，将委托相关函数内联，但是希望隔离DongDong，故采用了委托。
- 1.用委托拆分类，承载一些变化，为后续不同配置方式做预留。
- 2.不需要添加长草颜团子的新类，将固定的UI配置代码委托给新类。

# 4.以查询取代派生变量实例
指导原则：《重构》——9.3 以查询取代派生变量
- package_size可以通过npk_2_size计算得来，不需要存储。
