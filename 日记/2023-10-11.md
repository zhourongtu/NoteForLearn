
# 总结


# 今日任务

- [ ] 载具染色编写功能分析
	- [ ] 载具当前配表


# 跟踪日志

- 15点58分：与杜一飞讨论载具染色问题

![[Pasted image 20231011161723.png]]

# 杂记
1. 玩具动作表
	1. 玩具表-->坐骑
		1. **玩具类型**-->载具（2）
		2. **绑定技能ID**-->（玩法提供的）
		3. **展示模型ID**-->（索引“**坐骑染色表**”）
			1. 使用技能的时候是组件拼出来的载具。
2. 道具表
	1. 新增“**坐骑染色表**”-->已经用上了。
		1. 索引一些参数。
			1. 模型id+贴图id-->**yoyo**和**坐骑**。
		![[Pasted image 20231011151909.png]]
3. **卖商品的情况**（需补充）
	1. 坐骑染色表里面（售卖）
		1. 商品id
		2. 购买消耗道具id列表
		3. 购买消耗道具数量列表
	![[Pasted image 20231011153300.png]]


![[Pasted image 20231011153512.png]]


# 参考




老的特效方案-->去掉

1. 模型预设表
	1. 所有的模型预设，都有一个参数：”**是否特效**“
	- 特效可以进行时间轴的换色。
	- 挂点获取特效。
	- 引擎接口获取：”发射器“
		- 可能存在多个发射器
		- 发射器：是特效的子单元-->可以编辑，按顺序
**2. 实际的行为
	1. 编辑：关键帧（添加关键帧、删除关键帧）、选中颜色、拖动关键帧位置、选中透明度。
	2. 保存到组件预设。
	3. 特效的颜色条（根据关键帧+颜色等参数生成）条由TA提供功能，能够展示出来。**

在现有的UI的情况下？数据。用现有的UI接整套逻辑。



我处理的目标：装饰下的指定特效。

这个特效的配置文件：editor_consts

我需要配置一项属性：颜色参数关键帧列表，这个value，预设的属性会有对应的值，然后会根据预设的数据创建一个unit，这个unit会包含这个值。

配置完成之后-->已经有了这个数据

显示这个数据相关的编辑项-->EditorUnitAttrSidePanel中，refresh_unit_attr_info，可以参考_get_paint_area_conf_data相关，如何获取到数据的。

将EditorUnitAttrViewCompNew中类似的结构-->提供一个click_func的回调，来打开调色面板-->单独编写调色面板，来打开。

  

面板基类：CommonSidePanel，UI写在里面了-- >我这边是一个新的界面-->BaseCCSPanel-->界面领域

  

如果说，我界面操作完成之后-->

  

get_func（展示默认需要，以及存储的参数）与set_func（调用unit相关方法来存储）

数据我得手动拿：unit.model可以取到“模型”-->可能有多个sfx。








编辑面板的结点UI类型

![[Pasted image 20231011210736.png]]


组件信息由策划设置-->按着旧的调色板即可



# 编辑器正常流程分析

1. 策划配置一些组件的参数，这些参数分为基本参数、特殊参数
	1. 基本参数：策划配置
	2. 特殊参数：由程序通过组件的特殊属性来获取，是否添加该参数。

	**参考信息：**EditorUnitAttrSidePanel，_get_paint_area_conf_data

2. 获取到attr_conf以后，里面包含了一个ui_type，该ui_type会对应一个**展示的结点结构（需要单独编写相关逻辑代码）**
	attr_conf相关的数据会放到里面。
	phone_editor_side_consts/PhoneEditorSideUIType/CUSTOM_COLOR
	- 属性结点工厂：EditorSideNodeInfoFactory

	属性节点处理部分逻辑：不保存数据，只是数据的展示工、搬运工。
	![[Pasted image 20231011213801.png]]


![[Pasted image 20231011212219.png]]
