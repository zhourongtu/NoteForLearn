
## 协程
> https://b23.tv/fx1Ooof
定义：协程是一个`可以暂停和恢复的函数`
  - 函数：又称子程序、方法、过程。
  - 暂停原因
    - 1.性能需要（网络等数据包）
    - 2.美观需要（渲染UI）
    - 3.逻辑需要，游戏内技能，不是瞬间完成，而是一帧一帧计算。
  - 暂停以后，然后呢？
    > 函数a->协程b->协程c->协程d（正在运行）  
    > 暂停的协程s
    - 1.回到调度器（a继续运行）
      > Go语言提供了这样的行为。
    - 2.回到Caller（c继续运行）
    - 3.直接恢复另一个协程（由d选择恢复一个协程）
      > 该方法最为强大  
      > 对称协程
  - 调度器：挑选合适的协程来运行，直到最后再也没有协程可以运行为止。
    - 调度器眼中的协程。
  - 协程、线程、多线程
    - (协程集合)的处理
    - 线程用于运行函数
    - 协程是一个可暂停的函数
  - 争议的言论
    - 协程是严谨的数学定义————可以很简单，即可以暂停与恢复的函数，故错误。
    - goroutine不是协程————是标准的协程，与是不是抢占式的调度无关。
    - 协程池子————大多数情况下，协程背靠线程池运行，而在有线程池的情况下运行，协程池没有价值。
      - 有栈协程池？有栈协程开销相对较大，比较有意义。
  - 逆天言论
    - 并行化不是协程
      - 协程是不是并行取决于是不是与多线程有关。

- 协程的目的：编写异步逻辑
  - 多线程？慢
  - 函数回调？丑
  - 协程，又快又好。
- 好处
  - 性能强劲
  - 语法优雅
  - 面试/毕设
  - 迎战未来
- 参考数据
  - 协程切换开销
    - r7-5800X < 3ns
    - i7-8500U < 3.5ns
    - co_context 单协程切换 < 10ns
    - co_context 跨协程切换 < 40ns
  - 线程切换开销
    - 2k+时钟周期(500ns+)
    - 考虑cache失效，10k~1M时钟周期。
  > 1G Hz时钟周期，为0.1ns。
> screenfetch获取一些信息。

