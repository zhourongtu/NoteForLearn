
## 序
我们需要修改代码，问题的核心在于————需求变更。
- 无法承受需求变更的设计不是好设计。
- 每一个有竞争力的开发者的目标就是：创建能够承受变更的设计。
> 注：承受变更的设计，不意味着一开始就需要全部设计好。
> 交叉参考：[软件隐喻：建筑](.\《代码大全》.md#常见的软件隐喻)


## 第1章、修改软件
- 修改软件的主要原因
  - 增加特性
  - 修正缺陷
  - 改善设计：有时候可能会引入缺陷（通常是删除了某个行为）
  - 优化对资源的利用

- 技术上重要的内容：**行为变更**


## 第3章、感知与分离

理想情况下：我们可以创建对象，为其编写测试，然后开始做其他工作。
- 困难点：类之间的依赖关系导致特定的一组对象拥有测试更加困难
- 解决方式：打破依赖关系，将类放到测试用具中-->打破依赖关系的方法。
  - 感知：当**无法访问我们的代码所计算的值**时，我们就会打破依赖以感知。
  - 分离：当我们**无法把一段代码放到测试用具中执行**的时候，我们就会打破依赖以分离。

- 伪对象：轻易感知活动影响力的“其他代码”
  - 例子：Sale与Display，使用接口FakeDisplay。
  - 测试用例：执行断言
- 模拟对象：在内部执行断言的伪对象（避免创建大量的伪对象）
  - verify函数自己测试

## 第6章、时间很紧张，但还是需要修改

### 6.1 新生方法(Sprout Method)
- 当需要向系统添加特性，并且可能全部通过新代码完成的时，你可以在新方法中编写代码，然后从新功能需要的地方调用它。
- 你可能无法很容易地为这些调用点编写测试，最差你可以为新代码编写测试。


